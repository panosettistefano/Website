<!DOCTYPE html>
<html lang="it" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>DÓJA | Institutional Art & Finance</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2250%22 fill=%22%23EF9B0F%22/></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: { obsidian: '#050607', gold: '#EF9B0F', jade: '#2D5A4C', terracotta: '#B35A44' },
                    fontFamily: { 
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    }
                }
            }
        }
    </script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html, body { overflow-x: hidden; min-height: 100%; transition: background-color 0.5s ease; scroll-behavior: smooth; width: 100%; }
        
        .dark body { background-color: #050607; color: #f4f4f5; }
        .light body { background-color: #F8F9FA; color: #09090b; }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #EF9B0F; border-radius: 10px; }

        .glass-nav { backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-bottom: 1px solid rgba(128,128,128,0.1); z-index: 1000; }
        .dark .glass-card { background: rgba(15, 17, 19, 0.6); border: 1px solid rgba(255, 255, 255, 0.05); }
        .light .glass-card { background: #ffffff; border: 1px solid rgba(0, 0, 0, 0.08); box-shadow: 0 10px 30px -10px rgba(0,0,0,0.05); }
        .glass-input { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; }
        .light .glass-input { background: rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.1); color: black; }

        .page { display: none; opacity: 0; transform: translateY(15px); transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1); }
        .page.active { display: block; opacity: 1; transform: translateY(0); }
        
        .img-slot { position: relative; overflow: hidden; border-radius: 2rem; background: #1a1d20; }
        .light .img-slot { background: #e2e8f0; }

        #mobile-menu { clip-path: circle(0% at 0% 0%); transition: all 0.7s cubic-bezier(0.85, 0, 0.15, 1); pointer-events: none; opacity: 0; }
        #mobile-menu.open { clip-path: circle(150% at 0% 0%); pointer-events: auto; opacity: 1; }
        
        .log-entry { animation: slideIn 0.3s ease-out forwards; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }

        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; border-color: #B35A44 !important; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

        #toast-container { position: fixed; bottom: 2rem; right: 2rem; z-index: 20000; display: flex; flex-direction: column; gap: 1rem; pointer-events: none; }
        .toast { background: rgba(5, 6, 7, 0.9); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); padding: 1rem 1.5rem; border-radius: 1rem; color: white; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; box-shadow: 0 10px 30px rgba(0,0,0,0.5); transform: translateY(100%); opacity: 0; transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1); pointer-events: auto; display: flex; items-center: center; gap: 0.8rem; }
        .toast.show { transform: translateY(0); opacity: 1; }
        .toast.success { border-left: 4px solid #EF9B0F; }
        .toast.error { border-left: 4px solid #B35A44; }

        @media (max-width: 768px) {
            .text-7xl { font-size: 3.5rem !important; }
            .p-12 { padding: 1.5rem !important; }
            .rounded-\[4rem\] { border-radius: 2.5rem !important; }
            #toast-container { left: 1rem; right: 1rem; bottom: 1rem; }
        }

        @media (min-width: 1024px) {
            html, body, a, button, input, select, textarea { cursor: none !important; }
            #cursor-dot, #cursor-outline { transform: translate(-50%, -50%); transition: opacity 0.3s ease, transform 0.1s ease-out; }
            .cursor-hover { transform: translate(-50%, -50%) scale(1.5) !important; background-color: rgba(239, 155, 15, 0.1) !important; border-color: #EF9B0F !important; }
        }
        @media (max-width: 1023px) { #cursor-dot, #cursor-outline { display: none; } }
    </style>
</head>
<body class="font-sans antialiased">
    <div id="cursor-dot" class="fixed w-2 h-2 bg-gold rounded-full pointer-events-none z-[10001] opacity-0 transition-opacity duration-300"></div>
    <div id="cursor-outline" class="fixed w-8 h-8 border border-gold/50 rounded-full pointer-events-none z-[10001] opacity-0 transition-opacity duration-300"></div>
    
    <div id="toast-container"></div>

    <div id="login-screen" class="fixed inset-0 z-[9999] bg-obsidian flex flex-col items-center justify-center p-6 text-center transition-opacity duration-700">
        <div class="mb-12 space-y-4">
            <h1 class="text-4xl md:text-6xl font-black tracking-[0.3em] text-gold italic">DÓJA</h1>
            <p class="text-[12px] text-zinc-500 uppercase tracking-[0.2em]" data-i18n="tagline">The Intersection of Art & Capital</p>
        </div>
        <div class="w-full max-w-sm glass-card p-8 md:p-12 rounded-[3rem] md:rounded-[4rem] space-y-6" id="login-card">
            <input type="text" id="terminal-id" placeholder="ADMIN" class="w-full bg-white/5 border border-white/10 rounded-2xl p-6 outline-none focus:border-gold transition-all text-white text-center tracking-[0.3em] font-bold">
            <input type="password" id="security-key" placeholder="••••" class="w-full bg-white/5 border border-white/10 rounded-2xl p-6 outline-none focus:border-gold transition-all text-white text-center tracking-[0.5em] font-bold">
            <button onclick="auth()" id="auth-btn" class="w-full bg-gold text-obsidian font-black p-6 rounded-2xl uppercase tracking-widest text-xs hover:scale-[1.02] active:scale-95 transition-all shadow-lg shadow-gold/20" data-i18n="initSession">Initialize Session</button>
        </div>
    </div>

    <div id="app-root" class="hidden">
        <nav class="glass-nav fixed top-0 w-full px-6 md:px-8 py-4 md:py-6 flex items-center justify-between">
            <div class="flex items-center gap-4 md:gap-8">
                <button onclick="toggleMenu()" class="lg:hidden text-gold p-2"><i data-lucide="menu"></i></button>
                <span class="text-2xl md:text-3xl font-black tracking-[0.2em] md:tracking-[0.3em] text-gold italic cursor-pointer" onclick="showPage('dashboard')">DÓJA</span>
            </div>
            <div class="hidden lg:flex items-center gap-10">
                <button onclick="showPage('dashboard')" class="text-[11px] font-black tracking-widest uppercase hover:text-gold transition-colors" data-i18n="navDashboard">Dashboard</button>
                <button onclick="showPage('portfolio')" class="text-[11px] font-black tracking-widest uppercase hover:text-gold transition-colors" data-i18n="navPortfolio">Portfolio</button>
                <button onclick="showPage('settings')" class="text-[11px] font-black tracking-widest uppercase hover:text-gold transition-colors" data-i18n="navSettings">Settings</button>
            </div>
            <div class="flex items-center gap-3 md:gap-5">
                <div class="hidden sm:block text-right">
                    <p class="text-[9px] font-black uppercase tracking-widest text-gold">Stefano Panosetti</p>
                    <p class="text-[8px] text-zinc-500 uppercase font-bold">Admin Verified</p>
                </div>
                <div class="w-10 h-10 md:w-12 md:h-12 rounded-full img-slot border border-gold/20 flex items-center justify-center cursor-pointer hover:border-gold transition-colors" onclick="showPage('settings')">
                    <i data-lucide="shield-check" class="w-4 h-4 md:w-5 md:h-5 text-gold"></i>
                </div>
            </div>
        </nav>

        <div id="mobile-menu" class="fixed inset-0 z-[999] lg:hidden bg-[#F8F9FA] dark:bg-obsidian p-8 pt-32 space-y-8">
            <button onclick="showPage('dashboard')" class="block text-5xl font-black italic tracking-tighter hover:text-gold transition-colors">Dashboard</button>
            <button onclick="showPage('portfolio')" class="block text-5xl font-black italic tracking-tighter hover:text-gold transition-colors">Portfolio</button>
            <button onclick="showPage('settings')" class="block text-5xl font-black italic tracking-tighter hover:text-gold transition-colors">Settings</button>
        </div>

        <main class="pt-28 md:pt-48 px-4 md:px-8 pb-32 max-w-7xl mx-auto">
            
            <section id="page-dashboard" class="page active space-y-12 md:y-20">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-10">
                    <div class="lg:col-span-2 glass-card rounded-[2.5rem] md:rounded-[4rem] p-6 md:p-12 flex flex-col justify-between min-h-[400px] md:min-h-[500px]">
                        <div class="flex justify-between items-start flex-wrap gap-4">
                            <div class="min-w-0">
                                <p class="text-zinc-500 text-[10px] font-black uppercase tracking-[0.4em] mb-4" data-i18n="netWorth">Total Net Worth</p>
                                <h2 class="text-4xl md:text-7xl font-black tracking-tighter italic flex items-baseline gap-2 break-all">
                                    <span class="currency-symbol text-gold">€</span><span data-val="net-worth">...</span>
                                </h2>
                            </div>
                            <button onclick="openTransactionModal()" class="bg-gold text-obsidian px-6 py-3 rounded-full flex items-center gap-2 hover:scale-105 transition-transform">
                                <i data-lucide="arrow-right-left" class="w-4 h-4"></i>
                                <span class="text-[10px] font-black uppercase tracking-widest">Operation</span>
                            </button>
                        </div>
                        <div class="h-[200px] md:h-[250px] w-full mt-6 md:mt-10">
                            <canvas id="netWorthChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="space-y-6 md:space-y-10">
                        <div class="glass-card rounded-[2.5rem] md:rounded-[3.5rem] p-8 md:p-10 flex flex-col h-[300px] md:h-[350px]">
                            <div class="flex items-center justify-between mb-6 md:mb-8">
                                <h3 class="font-black text-[10px] uppercase tracking-widest text-zinc-500" data-i18n="systemLog">Terminal Live Logs</h3>
                                <i data-lucide="cpu" class="w-4 h-4 text-jade"></i>
                            </div>
                            <div id="terminal-logs" class="font-mono text-[9px] md:text-[10px] space-y-3 md:space-y-4 text-jade/80 overflow-hidden"></div>
                        </div>

                        <div class="glass-card rounded-[2.5rem] md:rounded-[3.5rem] p-8 md:p-10 bg-gold/5 border-gold/20">
                            <h3 class="font-black text-[10px] uppercase tracking-widest text-gold mb-6" data-i18n="marketWatch">Market Watch</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center border-b border-white/5 pb-3">
                                    <span class="text-[11px] font-bold">Swiss Gold Bullion</span>
                                    <span class="text-jade font-mono text-[11px]">+1.24%</span>
                                </div>
                                <div class="flex justify-between items-center border-b border-white/5 pb-3">
                                    <span class="text-[11px] font-bold">ETH/DÓJA Vault</span>
                                    <span class="text-terracotta font-mono text-[11px]">-0.12%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-[11px] font-bold">Rare Diamond Index</span>
                                    <span class="text-jade font-mono text-[11px]">+3.82%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="space-y-8 md:space-y-10">
                    <div class="flex items-center gap-6">
                        <h3 class="text-[11px] font-black uppercase tracking-[0.5em] text-zinc-500 whitespace-nowrap" data-i18n="recentAcq">Recent Acquisitions</h3>
                        <div class="h-px flex-1 bg-gradient-to-r from-gold/20 to-transparent"></div>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-10" id="recent-grid"></div>
                </div>
            </section>

            <section id="page-portfolio" class="page space-y-12">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-6 border-b border-gold/10 pb-8 md:pb-12">
                    <div>
                        <h2 class="text-5xl md:text-7xl font-black tracking-tighter italic">Portfolio</h2>
                        <p class="text-zinc-500 text-[11px] uppercase font-black tracking-[0.3em] mt-3" data-i18n="securedAssets">Secured Institutional Vault assets</p>
                    </div>
                    <div class="flex flex-wrap gap-4">
                        <button onclick="exportData()" class="glass-card px-4 md:px-6 py-3 md:py-4 rounded-2xl flex flex-col hover:border-gold transition-colors">
                            <span class="text-[9px] text-zinc-500 uppercase font-black"><i data-lucide="download" class="inline w-3 h-3 mb-1"></i> Export</span>
                            <span class="text-md font-black italic">CSV</span>
                        </button>
                        <button onclick="openAddAssetModal()" class="bg-gold text-obsidian px-6 py-4 rounded-2xl flex flex-col items-center justify-center hover:scale-105 transition-transform shadow-lg shadow-gold/20">
                            <i data-lucide="plus" class="w-5 h-5 mb-1"></i>
                            <span class="text-[9px] uppercase font-black tracking-widest">Add Asset</span>
                        </button>
                    </div>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-12" id="portfolio-grid"></div>
            </section>

            <section id="page-settings" class="page max-w-2xl mx-auto">
                <div class="glass-card rounded-[2.5rem] md:rounded-[4rem] p-8 md:p-12 space-y-10 md:space-y-12">
                    <h2 class="text-4xl md:text-5xl font-black italic tracking-tighter" data-i18n="terminalConfig">Terminal Config</h2>
                    <div class="space-y-4 md:space-y-6">
                        <div onclick="toggleTheme()" class="flex justify-between items-center p-6 md:p-8 bg-black/20 rounded-[2rem] md:rounded-[3rem] border border-white/5 cursor-pointer hover:border-gold/30 transition-all group">
                            <div class="flex items-center gap-4 md:gap-6">
                                <div class="w-10 h-10 md:w-14 md:h-14 rounded-2xl bg-gold/10 flex items-center justify-center text-gold"><i data-lucide="moon" id="theme-icon"></i></div>
                                <div><p class="font-black text-sm md:text-lg" data-i18n="themeTitle">Theme</p><p class="text-[10px] text-zinc-500" data-i18n="themeSub">Switch Light/Dark mode</p></div>
                            </div>
                        </div>
                        <div onclick="toggleLang()" class="flex justify-between items-center p-6 md:p-8 bg-black/20 rounded-[2rem] md:rounded-[3rem] border border-white/5 cursor-pointer hover:border-gold/30 transition-all group">
                            <div class="flex items-center gap-4 md:gap-6">
                                <div class="w-10 h-10 md:w-14 md:h-14 rounded-2xl bg-gold/10 flex items-center justify-center text-gold"><i data-lucide="languages"></i></div>
                                <div><p class="font-black text-sm md:text-lg" data-i18n="langTitle">Language</p><p class="text-[10px] text-zinc-500" id="current-lang">Italiano (IT)</p></div>
                            </div>
                        </div>
                        <div onclick="toggleCurrency()" class="flex justify-between items-center p-6 md:p-8 bg-black/20 rounded-[2rem] md:rounded-[3rem] border border-white/5 cursor-pointer hover:border-gold/30 transition-all group">
                            <div class="flex items-center gap-4 md:gap-6">
                                <div class="w-10 h-10 md:w-14 md:h-14 rounded-2xl bg-gold/10 flex items-center justify-center text-gold"><i data-lucide="banknote"></i></div>
                                <div><p class="font-black text-sm md:text-lg" data-i18n="currencyTitle">Currency</p><p class="text-[10px] text-zinc-500" id="current-currency">Euro (€)</p></div>
                            </div>
                        </div>
                        <div class="p-6 md:p-8 bg-black/20 rounded-[2rem] md:rounded-[3rem] border border-white/5">
                            <p class="font-black text-sm mb-4">RESET DATA</p>
                            <button onclick="hardReset()" class="w-full bg-terracotta/20 text-terracotta font-bold p-4 rounded-xl border border-terracotta/50 uppercase text-[10px] tracking-widest hover:bg-terracotta hover:text-white transition-all">Clear All Local Data</button>
                        </div>
                        <button onclick="logout()" class="w-full text-terracotta font-black text-[11px] md:text-[12px] uppercase tracking-[0.4em] pt-8 md:pt-12 hover:scale-95 transition-transform" data-i18n="terminate">Terminate Session</button>
                    </div>
                </div>
            </section>

            <section id="page-legal" class="page max-w-4xl mx-auto pb-20">
                <div class="glass-card rounded-[3rem] md:rounded-[4rem] p-8 md:p-16 space-y-12">
                     <div class="border-b border-gold/10 pb-8">
                        <h2 class="text-5xl font-black italic tracking-tighter" data-i18n="legalTitle">Legal Documentation</h2>
                        <p class="text-zinc-500 text-[10px] uppercase font-black tracking-[0.4em] mt-4">Protocollo Trattamento Dati DÓJA v.2.4</p>
                    </div>
                    <div class="space-y-6">
                        <h3 class="text-gold text-xs font-black uppercase tracking-widest flex items-center gap-2">
                            <i data-lucide="shield-check" class="w-4 h-4"></i> Privacy Policy
                        </h3>
                        <div class="text-[12px] text-zinc-400 leading-relaxed font-medium space-y-4">
                            <p>La tua privacy è la nostra priorità assoluta. I dati sono salvati esclusivamente in locale (Local Storage).</p>
                        </div>
                    </div>
                    <button onclick="showPage('dashboard')" class="text-gold font-black text-[10px] uppercase tracking-widest flex items-center gap-2 pt-8 hover:gap-4 transition-all">
                        <i data-lucide="arrow-left" class="w-4 h-4"></i> Back to Dashboard
                    </button>
                </div>
            </section>
        </main>

        <footer class="border-t border-white/5 pt-12 md:pt-20 pb-16 px-6 md:px-8 max-w-7xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12 md:gap-16 mb-16 text-center md:text-left">
                <div class="space-y-6">
                    <h4 class="text-3xl font-black italic text-gold">DÓJA</h4>
                    <p class="text-zinc-500 text-xs leading-relaxed uppercase tracking-wider">The premier interface for private art banking and high-yield financial art instruments.</p>
                </div>
                <div class="space-y-6">
                    <h5 class="text-[11px] font-black uppercase tracking-[0.4em] text-zinc-400" data-i18n="legalContact">Legal & Contacts</h5>
                    <ul class="text-[10px] space-y-3 font-bold uppercase tracking-widest text-zinc-500">
                        <li><a href="javascript:void(0)" onclick="showPage('legal')" class="hover:text-gold transition-colors">Privacy Policy</a></li>
                        <li><a href="mailto:stefano@doja.io" class="hover:text-gold transition-colors">Stefano Panosetti</a></li>
                    </ul>
                </div>
                <div class="space-y-6 text-center md:text-right">
                    <h5 class="text-[11px] font-black uppercase tracking-[0.4em] text-zinc-400">Security Status</h5>
                    <div class="flex justify-center md:justify-end gap-4">
                        <i data-lucide="shield-check" class="text-jade w-5 h-5"></i>
                        <i data-lucide="lock" class="text-gold w-5 h-5"></i>
                        <i data-lucide="database" class="text-zinc-600 w-5 h-5"></i>
                    </div>
                </div>
            </div>
            <div class="text-center pt-8 border-t border-white/5">
                <p class="text-[8px] md:text-[9px] text-zinc-700 font-black tracking-[0.4em] md:tracking-[0.6em] uppercase">© 2024 DÓJA INSTITUTIONAL | MILANO - ZURICH - NEW YORK</p>
            </div>
        </footer>
    </div>

    <div id="asset-modal" class="fixed inset-0 z-[10000] bg-obsidian/95 backdrop-blur-3xl hidden flex items-center justify-center p-4 md:p-6">
        <div class="glass-card max-w-5xl w-full rounded-[2.5rem] md:rounded-[5rem] overflow-y-auto max-h-[90vh] md:max-h-none md:overflow-hidden flex flex-col md:flex-row relative shadow-2xl">
            <button onclick="closeModal('asset-modal')" class="absolute top-6 right-6 md:top-10 md:right-10 z-30 bg-black/40 hover:bg-gold p-3 md:p-4 rounded-full text-white transition-all"><i data-lucide="x"></i></button>
            <div id="modal-img-bg" class="h-[300px] md:h-auto md:w-3/5 bg-cover bg-center shrink-0"></div>
            <div class="p-8 md:p-16 md:w-2/5 space-y-6 md:space-y-10 flex flex-col justify-center">
                <div>
                    <span id="modal-artist" class="text-gold text-[10px] md:text-[12px] font-black tracking-[0.5em] uppercase"></span>
                    <h3 id="modal-title" class="text-4xl md:text-6xl font-black italic tracking-tighter mt-4 leading-tight"></h3>
                </div>
                <div class="space-y-6 pt-6 md:pt-10 border-t border-white/10">
                    <div class="grid grid-cols-2 gap-4 md:gap-8">
                        <div>
                            <p class="text-[10px] text-zinc-500 uppercase font-black tracking-widest mb-2" data-i18n="valuation">Valuation</p>
                            <p id="modal-price" class="text-2xl md:text-3xl font-black italic tracking-tighter"></p>
                        </div>
                        <div>
                            <p class="text-[10px] text-zinc-500 uppercase font-black tracking-widest mb-2">Provenance</p>
                            <p class="text-xs font-bold uppercase tracking-widest text-jade">Verified</p>
                        </div>
                    </div>
                    <div class="p-5 md:p-6 bg-jade/5 border border-jade/10 rounded-2xl md:rounded-3xl space-y-3">
                        <div class="flex items-center gap-3 text-jade font-black text-[9px] uppercase tracking-[0.3em]">
                            <i data-lucide="shield-check" class="w-4 h-4"></i> Secured Asset
                        </div>
                        <p id="modal-desc" class="text-[10px] md:text-[11px] text-zinc-400 italic leading-relaxed"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="add-asset-modal" class="fixed inset-0 z-[10000] bg-obsidian/95 backdrop-blur-3xl hidden flex items-center justify-center p-4">
        <div class="glass-card w-full max-w-lg rounded-[3rem] p-8 md:p-12 space-y-8">
            <h3 class="text-3xl font-black italic tracking-tighter text-gold">Add Asset</h3>
            <div class="space-y-4">
                <input id="new-artist" placeholder="Artist Name" class="w-full glass-input p-4 rounded-xl outline-none font-bold">
                <input id="new-title" placeholder="Artwork Title" class="w-full glass-input p-4 rounded-xl outline-none font-bold">
                <input id="new-price" type="number" placeholder="Value (EUR)" class="w-full glass-input p-4 rounded-xl outline-none font-bold">
                <input id="new-year" placeholder="Year" class="w-full glass-input p-4 rounded-xl outline-none font-bold">
                <input id="new-img" placeholder="Image URL" class="w-full glass-input p-4 rounded-xl outline-none font-bold">
            </div>
            <div class="flex gap-4">
                <button onclick="closeModal('add-asset-modal')" class="flex-1 py-4 font-black uppercase text-[10px] tracking-widest hover:text-white text-zinc-500">Cancel</button>
                <button onclick="confirmAddAsset()" class="flex-1 bg-gold text-obsidian rounded-xl font-black uppercase text-[10px] tracking-widest py-4 hover:scale-105 transition-transform">Confirm</button>
            </div>
        </div>
    </div>

    <div id="trans-modal" class="fixed inset-0 z-[10000] bg-obsidian/95 backdrop-blur-3xl hidden flex items-center justify-center p-4">
        <div class="glass-card w-full max-w-lg rounded-[3rem] p-8 md:p-12 space-y-8">
            <h3 class="text-3xl font-black italic tracking-tighter text-gold">Funds Op</h3>
            <div class="space-y-4">
                <select id="trans-type" class="w-full glass-input p-4 rounded-xl outline-none font-bold bg-transparent">
                    <option value="deposit" class="text-black">Deposit / Profit</option>
                    <option value="withdraw" class="text-black">Withdrawal</option>
                </select>
                <input id="trans-amount" type="number" placeholder="Amount" class="w-full glass-input p-4 rounded-xl outline-none font-bold">
            </div>
            <div class="flex gap-4">
                <button onclick="closeModal('trans-modal')" class="flex-1 py-4 font-black uppercase text-[10px] tracking-widest hover:text-white text-zinc-500">Cancel</button>
                <button onclick="confirmTrans()" class="flex-1 bg-jade text-white rounded-xl font-black uppercase text-[10px] tracking-widest py-4 hover:scale-105 transition-transform">Execute</button>
            </div>
        </div>
    </div>

    <script>
        // --- DATA MANAGER & STATE ---
        const DEFAULT_ASSETS = [
            { id: 1, artist: "Vincent Van Gogh", title: "Starry Night", price: 4500000, desc: "Acquisizione strategica del 2023. Conservata in caveau climatizzato di Livello 5.", year: "1889", status: "In Vault", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg/1200px-Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg" },
            { id: 2, artist: "Salvador Dalì", title: "Temptation", price: 1280000, desc: "Rarità assoluta del surrealismo. Provenienza garantita da archivio ufficiale Dalì.", year: "1946", status: "Exhibited", img: "https://wahooart.com/media/artworks/images/full/24/47/2447e18405b84db99fcf4c89b65e0555.Jpg" },
            { id: 3, artist: "Antonio Ligabue", title: "Tigre Reale", price: 890000, desc: "Il capolavoro dell'espressionismo italiano selvaggio. Acquistato presso Sotheby's.", year: "1953", status: "In Vault", img: "https://gallery.artsupp.com/partners_artworks_pictures/full/3761.jpg" }
        ];

        let state = {
            lang: 'it',
            currency: 'EUR',
            theme: 'dark',
            assets: [],
            balanceHistory: [1800000, 1950000, 1850000, 2100000, 2300000, 2409500],
            liquidity: 0
        };

        const dict = {
            it: {
                tagline: "L'Intersezione tra Arte e Capitale", initSession: "Inizializza Sessione", navDashboard: "Dashboard", navPortfolio: "Portfolio",
                navSettings: "Impostazioni", netWorth: "Patrimonio Netto Totale", systemLog: "Log Terminale Live",
                recentAcq: "Acquisizioni Recenti", assetsCount: "Asset Totali", valuation: "Valutazione", terminalConfig: "Config. Terminale",
                themeTitle: "Tema Interfaccia", themeSub: "Passa da Chiaro a Scuro", langTitle: "Lingua Terminale", currencyTitle: "Valuta Visualizzata",
                terminate: "Termina Sessione", securedAssets: "Asset Protetti nel Vault", marketWatch: "Monitor Mercato",
                legalTitle: "Documentazione Legale", legalContact: "Legale e Contatti" 
            },
            en: {
                tagline: "The Intersection of Art & Capital", initSession: "Initialize Session", navDashboard: "Dashboard", navPortfolio: "Portfolio",
                navSettings: "Settings", netWorth: "Total Net Worth", systemLog: "Terminal Live Logs",
                recentAcq: "Recent Acquisitions", assetsCount: "Total Assets", valuation: "Valuation", terminalConfig: "Terminal Config",
                themeTitle: "Theme", themeSub: "Switch Light/Dark mode", langTitle: "Language", currencyTitle: "Currency",
                terminate: "Terminate Session", securedAssets: "Secured Institutional Assets", marketWatch: "Market Watch", legalContact: "Legal & Contacts", legalTitle: "Legal Documentation"
            }
        };

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSfx(freq = 800) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine'; osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.01, audioCtx.currentTime);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.05);
        }

        function loadState() {
            const saved = localStorage.getItem('doja_data');
            if (saved) {
                state = { ...state, ...JSON.parse(saved) };
            } else {
                state.assets = DEFAULT_ASSETS;
            }
            applySettings();
        }

        function saveState() {
            localStorage.setItem('doja_data', JSON.stringify(state));
        }

        function applySettings() {
            // Theme
            document.documentElement.className = state.theme;
            document.getElementById('theme-icon').setAttribute('data-lucide', state.theme === 'dark' ? 'moon' : 'sun');
            // Lang
            document.querySelectorAll('[data-i18n]').forEach(el => {
                if(dict[state.lang][el.getAttribute('data-i18n')]) {
                    el.innerText = dict[state.lang][el.getAttribute('data-i18n')];
                }
            });
            document.getElementById('current-lang').innerText = state.lang === 'it' ? 'Italiano (IT)' : 'English (EN)';
            // Currency
            document.getElementById('current-currency').innerText = state.currency === 'EUR' ? 'Euro (€)' : 'Dollar ($)';
            document.querySelector('.currency-symbol').innerText = state.currency === 'EUR' ? '€' : '$';
        }

        function getTotalValuation() {
            const assetsVal = state.assets.reduce((sum, a) => sum + parseInt(a.price), 0);
            return assetsVal + state.liquidity;
        }

        function updateNetWorthUI() {
            const total = getTotalValuation();
            const rate = state.currency === 'USD' ? 1.08 : 1;
            document.querySelector('[data-val="net-worth"]').innerText = Math.floor(total * rate).toLocaleString(state.lang === 'it' ? 'it-IT' : 'en-US');
            
            // Aggiorna history per il grafico
            if(state.balanceHistory[state.balanceHistory.length-1] !== total) {
                state.balanceHistory.push(total);
                if(state.balanceHistory.length > 6) state.balanceHistory.shift();
                saveState();
                initChart();
            }
        }

        // --- AUTH & INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            loadState();
            if(localStorage.getItem('doja_session') === 'active') {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('app-root').classList.remove('hidden');
                initApp();
                showToast("Bentornato, Admin", "success");
            }
        });

        function auth() {
            const user = document.getElementById('terminal-id');
            const pass = document.getElementById('security-key');
            if(user.value === "ADMIN" && pass.value === "1234") {
                localStorage.setItem('doja_session', 'active');
                playSfx(1000);
                document.getElementById('login-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('login-screen').classList.add('hidden');
                    document.getElementById('app-root').classList.remove('hidden');
                    initApp();
                    showToast("Sessione Inizializzata", "success");
                }, 800);
            } else {
                playSfx(150);
                document.getElementById('login-card').classList.add('shake');
                showToast("Accesso Negato", "error");
                setTimeout(() => document.getElementById('login-card').classList.remove('shake'), 500);
            }
        }
        
        function logout() {
            localStorage.removeItem('doja_session');
            location.reload();
        }

        function hardReset() {
            if(confirm("ATTENZIONE: Cancellerà tutti i dati salvati (Portfolio, Impostazioni). Continuare?")) {
                localStorage.removeItem('doja_data');
                logout();
            }
        }

        function initApp() {
            lucide.createIcons();
            renderAssets();
            initChart();
            startLogs();
            updateNetWorthUI();
        }

        // --- ASSET MANAGEMENT ---
        function renderAssets() {
            const grid = document.getElementById('recent-grid');
            const pGrid = document.getElementById('portfolio-grid');
            grid.innerHTML = ''; pGrid.innerHTML = '';
            
            state.assets.forEach(a => {
                const priceFormatted = formatCurr(a.price);
                
                grid.innerHTML += `
                    <div class="glass-card rounded-[2.5rem] p-6 flex items-center gap-6 cursor-pointer hover:scale-[1.03] transition-all group" onclick="openAsset(${a.id})">
                        <div class="w-20 h-20 rounded-2xl overflow-hidden img-slot border border-white/5 shrink-0">
                            <img src="${a.img}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700">
                        </div>
                        <div class="min-w-0">
                            <p class="text-gold text-[9px] font-black uppercase tracking-[0.2em] mb-1">${a.artist}</p>
                            <h4 class="font-black italic text-lg tracking-tighter truncate">${a.title}</h4>
                            <p class="text-[8px] text-zinc-500 font-bold uppercase mt-1">Ref: #00${a.id}_DOJA</p>
                        </div>
                    </div>`;

                pGrid.innerHTML += `
                    <div class="glass-card rounded-[3rem] md:rounded-[4rem] overflow-hidden group cursor-pointer" onclick="openAsset(${a.id})">
                        <div class="aspect-[4/5] overflow-hidden relative">
                            <div class="absolute top-6 right-6 z-10 bg-black/60 backdrop-blur-md px-4 py-2 rounded-full text-[9px] font-black uppercase tracking-widest text-gold border border-gold/20">${a.status || 'Vault'}</div>
                            <img src="${a.img}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-1000">
                        </div>
                        <div class="p-8 md:p-12 space-y-6 md:space-y-8">
                            <div>
                                <span class="text-gold text-[10px] md:text-[11px] font-black uppercase tracking-[0.4em]">${a.artist}</span>
                                <h4 class="text-3xl md:text-4xl font-black italic mt-3 tracking-tighter">${a.title}</h4>
                                <p class="text-[9px] md:text-[10px] text-zinc-500 mt-2 font-bold uppercase tracking-widest">${a.year} • Masterpiece Index</p>
                            </div>
                            <div class="pt-6 md:pt-8 border-t border-white/5 flex justify-between items-center">
                                <div><p class="text-[9px] md:text-[10px] text-zinc-500 uppercase font-black tracking-widest" data-i18n="valuation">Valuation</p><p class="text-2xl md:text-3xl font-black italic tracking-tighter">${priceFormatted}</p></div>
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-2xl bg-jade/10 flex items-center justify-center text-jade"><i data-lucide="shield-check"></i></div>
                            </div>
                        </div>
                    </div>`;
            });
            lucide.createIcons();
        }

        // Add Asset Logic
        function openAddAssetModal() { document.getElementById('add-asset-modal').classList.remove('hidden'); }
        function confirmAddAsset() {
            const artist = document.getElementById('new-artist').value;
            const title = document.getElementById('new-title').value;
            const price = parseFloat(document.getElementById('new-price').value);
            const year = document.getElementById('new-year').value;
            const img = document.getElementById('new-img').value || "https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg";

            if(!artist || !title || !price) { showToast("Dati mancanti", "error"); return; }

            const newAsset = {
                id: Date.now(),
                artist, title, price, year, status: "In Vault", img, desc: "Acquisizione manuale tramite terminale."
            };

            state.assets.unshift(newAsset);
            saveState();
            renderAssets();
            updateNetWorthUI();
            closeModal('add-asset-modal');
            showToast("Asset Acquisito con Successo");
            
            // Pulisci form
            document.getElementById('new-artist').value = "";
            document.getElementById('new-title').value = "";
            document.getElementById('new-price').value = "";
        }

        // Transaction Logic
        function openTransactionModal() { document.getElementById('trans-modal').classList.remove('hidden'); }
        function confirmTrans() {
            const type = document.getElementById('trans-type').value;
            const amount = parseFloat(document.getElementById('trans-amount').value);
            
            if(!amount || amount <= 0) { showToast("Importo non valido", "error"); return; }

            if(type === 'deposit') state.liquidity += amount;
            else state.liquidity -= amount;

            saveState();
            updateNetWorthUI();
            initChart(); // Redraw chart
            closeModal('trans-modal');
            showToast("Transazione Registrata");
            document.getElementById('trans-amount').value = "";
        }

        function exportData() {
            let csvContent = "data:text/csv;charset=utf-8,ID,Artist,Title,Price,Year\n";
            state.assets.forEach(a => {
                csvContent += `${a.id},"${a.artist}","${a.title}",${a.price},${a.year}\n`;
            });
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "DOJA_Portfolio_Export.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showToast("Export Completato");
        }

        function formatCurr(val) {
            const rate = state.currency === 'USD' ? 1.08 : 1;
            const symbol = state.currency === 'EUR' ? '€' : '$';
            return symbol + ' ' + Math.floor(val * rate).toLocaleString(state.lang === 'it' ? 'it-IT' : 'en-US');
        }

        function initChart() {
            const ctx = document.getElementById('netWorthChart').getContext('2d');
            const g = ctx.createLinearGradient(0, 0, 0, 300);
            g.addColorStop(0, 'rgba(239, 155, 15, 0.4)'); g.addColorStop(1, 'rgba(239, 155, 15, 0)');
            
            if(window.netChart) window.netChart.destroy();
            
            // Usa i dati dallo stato
            const dataPoints = state.balanceHistory.length > 0 ? state.balanceHistory : [1000000];
            const labels = dataPoints.map((_, i) => `T-${dataPoints.length - 1 - i}`);

            window.netChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        data: dataPoints,
                        borderColor: '#EF9B0F', borderWidth: 3, tension: 0.4, pointRadius: 0, fill: true, backgroundColor: g
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    },
                    animation: { duration: 1000 }
                }
            });
        }

        // --- UTILS & UI ---
        function showToast(msg, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            const icon = type === 'success' ? 'check-circle' : 'alert-triangle';
            const color = type === 'success' ? 'text-gold' : 'text-terracotta';
            toast.innerHTML = `<i data-lucide="${icon}" class="${color} w-5 h-5"></i> <span>${msg}</span>`;
            container.appendChild(toast);
            lucide.createIcons();
            requestAnimationFrame(() => toast.classList.add('show'));
            playSfx(type === 'success' ? 1200 : 200);
            setTimeout(() => { toast.classList.remove('show'); setTimeout(() => toast.remove(), 400); }, 3000);
        }

        function startLogs() {
            const container = document.getElementById('terminal-logs');
            const msgs = ["Handshake complete", "Vault Layer 5 Sync", "Blockchain Verified", "Sotheby's Index Update", "Encrypted Tunnel stable"];
            setInterval(() => {
                const p = document.createElement('p');
                p.className = "log-entry";
                p.innerHTML = `<span class="text-zinc-700 mr-2">[${new Date().toLocaleTimeString()}]</span> ${msgs[Math.floor(Math.random()*msgs.length)]}`;
                container.prepend(p);
                if(container.children.length > 8) container.lastChild.remove();
            }, 4000);
        }

        function toggleLang() {
            playSfx();
            state.lang = state.lang === 'it' ? 'en' : 'it';
            saveState();
            applySettings();
            renderAssets();
            updateNetWorthUI();
            showToast("Lingua Aggiornata");
        }

        function toggleCurrency() {
            playSfx();
            state.currency = state.currency === 'EUR' ? 'USD' : 'EUR';
            saveState();
            applySettings();
            renderAssets();
            updateNetWorthUI();
            showToast("Valuta Aggiornata");
        }

        function toggleTheme() {
            playSfx();
            state.theme = state.theme === 'dark' ? 'light' : 'dark';
            saveState();
            applySettings();
            initChart();
            showToast("Tema Modificato");
        }

        function openAsset(id) {
            playSfx(600);
            const a = state.assets.find(x => x.id === id);
            if(!a) return;
            document.getElementById('modal-artist').innerText = a.artist;
            document.getElementById('modal-title').innerText = a.title;
            document.getElementById('modal-price').innerText = formatCurr(a.price);
            document.getElementById('modal-desc').innerText = a.desc || "No description available.";
            document.getElementById('modal-img-bg').style.backgroundImage = `url(${a.img})`;
            document.getElementById('asset-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(id) { 
            document.getElementById(id).classList.add('hidden'); 
            document.body.style.overflow = 'auto';
        }

        function showPage(id) {
            playSfx();
            document.getElementById('mobile-menu').classList.remove('open');
            document.body.style.overflow = 'auto';
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + id).classList.add('active');
            if(id === 'dashboard') setTimeout(initChart, 100);
            window.scrollTo(0,0);
        }

        function toggleMenu() { 
            const menu = document.getElementById('mobile-menu');
            const isOpen = menu.classList.toggle('open');
            document.body.style.overflow = isOpen ? 'hidden' : 'auto';
            lucide.createIcons();
        }

        // Mouse Logic
        const dot = document.getElementById('cursor-dot');
        const outline = document.getElementById('cursor-outline');
        window.addEventListener('mousemove', (e) => {
            const posX = e.clientX;
            const posY = e.clientY;
            dot.style.opacity = "1"; outline.style.opacity = "1";
            dot.style.left = `${posX}px`; dot.style.top = `${posY}px`;
            outline.animate({ left: `${posX}px`, top: `${posY}px` }, { duration: 150, fill: "forwards" });
        });
        const clickables = document.querySelectorAll('button, a, input, .cursor-pointer, .glass-card');
        clickables.forEach(el => {
            el.addEventListener('mouseenter', () => { outline.classList.add('cursor-hover'); dot.style.transform = 'translate(-50%, -50%) scale(0.5)'; });
            el.addEventListener('mouseleave', () => { outline.classList.remove('cursor-hover'); dot.style.transform = 'translate(-50%, -50%) scale(1)'; });
        });
    </script>
</body>
</html>